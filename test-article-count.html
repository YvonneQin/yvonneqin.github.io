<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article Count Test</title>
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="https://at.alicdn.com/t/c/font_4545731_1iwxww92za1.css" />
    <link rel="stylesheet" href="css/rad-icons.css" />
    <link rel="stylesheet" href="css/custom.css" />
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .filter-buttons { display: flex; gap: 10px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>📊 文章计数功能测试</h1>
    
    <div class="test-section">
        <h2>测试按钮</h2>
        <div class="filter-buttons" role="tablist">
            <button class="btn btn-sm" data-category="all">
                All Category <span class="article-count" id="count-all">0</span>
            </button>
            <button class="btn btn-frameless btn-sm is-filter" data-category="best_practice">
                Best Practices <span class="article-count" id="count-best_practice">0</span>
            </button>
            <button class="btn btn-frameless btn-sm is-filter" data-category="learning_notes">
                Learning Notes <span class="article-count" id="count-learning_notes">0</span>
            </button>
            <button class="btn btn-frameless btn-sm is-filter" data-category="insight">
                Others <span class="article-count" id="count-insight">0</span>
            </button>
        </div>
    </div>
    
    <div class="test-section">
        <h2>测试文章</h2>
        <div id="article-container">
            <div class="article-card" category="best_practice">Best Practice Article 1</div>
            <div class="article-card" category="best_practice">Best Practice Article 2</div>
            <div class="article-card" category="learning_notes">Learning Notes Article 1</div>
            <div class="article-card" category="learning_notes">Learning Notes Article 2</div>
            <div class="article-card" category="learning_notes">Learning Notes Article 3</div>
            <div class="article-card" category="insight">Insight Article 1</div>
            <div class="article-card" category="insight">Insight Article 2</div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>统计结果</h2>
        <p id="stats">正在统计...</p>
    </div>
    
    <script>
        // 统计文章数量并更新按钮显示
        function updateArticleCounts() {
            try {
                var articles = document.querySelectorAll(".article-card");
                var counts = {
                    'all': articles.length,
                    'best_practice': 0,
                    'learning_notes': 0,
                    'insight': 0
                };
                
                // 统计各分类文章数量
                articles.forEach(function(article) {
                    var category = article.getAttribute("category");
                    if (category && counts.hasOwnProperty(category)) {
                        counts[category]++;
                    }
                });
                
                // 更新按钮显示
                Object.keys(counts).forEach(function(category) {
                    var countElement = document.getElementById('count-' + category);
                    if (countElement) {
                        countElement.textContent = counts[category];
                    }
                });
                
                // 显示统计结果
                document.getElementById('stats').innerHTML = 
                    `总文章数: ${counts.all}<br>
                     Best Practices: ${counts.best_practice}<br>
                     Learning Notes: ${counts.learning_notes}<br>
                     Insights: ${counts.insight}`;
                
                console.log('Article counts updated:', counts);
            } catch (error) {
                console.error('Error updating article counts:', error);
            }
        }
        
        // 页面加载完成后初始化计数
        document.addEventListener('DOMContentLoaded', function() {
            updateArticleCounts();
        });
    </script>
</body>
</html>
